<header>
    <h1>Wlcome in Battleship Game</h1>
    <h3>Let's play!</h3>
</header>

<main>
    <div class="container">

        <div *ngIf="!isGameStarted && !isNewGameChosen && !isContinuationGameChosen">

            <button type="button" (click)="StartNewGame()"> New Game </button>

            <button type="button" (click)="ContinueGame()"> Continue Game </button>

        </div>

        <form *ngIf="!isGameStarted && isNewGameChosen && !isContinuationGameChosen"
        [formGroup]="newGameForm"
        (ngSubmit)="InitializeGame()">
            <input formControlName="firstPlayerName" type="text" placeholder="First Player Name">
            <input formControlName="secondPlayerName" type="text" placeholder="Second Player Name">
            <p>Insert board size</p>
            <input formControlName="xSize" type="number" min="7" max="20"> X <input formControlName="ySize" type="number" min="7" max="20">
            <button type="submit">Start Game</button>
        </form>

        <form *ngIf="!isGameStarted && !isNewGameChosen && isContinuationGameChosen"
        [formGroup]="continueGameForm"
        (ngSubmit)="LoadGame()">
            <p>Insert Game Number</p>
            <input type="number" formControlName="gameId">
            <button type="submit">Continue Game</button>
        </form>

        <article *ngIf="isGameStarted">
            <h2>GameId: {{game.id}}</h2>

            <section *ngFor="let player of game.players" class="playerData">
                <div>
                    <h3>Player one name: {{player.name}}</h3>
                    <p>Player one score: {{player.score}}</p>
                </div>
            </section>


            <section *ngFor="let player of game.players">

                <div *ngIf="player.isMyOpponentMove && !game.isEnded">

                    <h3 @fade>{{shootingPlayerName}} is your move. Shoot to your opponent board.</h3>
                    <div @fade class="board">
                        <div *ngFor="let row of player.board.rows" class="row">

                            <div *ngFor="let field of row.fields" class="field" (click)="Shoot(player.id, field.y_Position, field.x_Position)">
                                
                                <p *ngIf="field.status != 2">{{field.y_Position}} , {{field.x_Position}}<br>

                                <div *ngIf="field.status == 2" class="ship">
                                    <mat-icon>directions_boat_filled</mat-icon>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                </div>
                
            </section>

            <section *ngIf="game.isEnded">
                <h2>The game is over!</h2>
                <h3>The winner is {{winnerName}}</h3>
            </section>

        </article>


    </div>

    <router-outlet></router-outlet>
</main>
